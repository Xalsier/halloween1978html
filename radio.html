<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        .container {
            max-width: 480px;
            width: 100%;
            height: 90vh;
            margin: 5vh auto;
            display: flex;
            flex-direction: row; /* Change to row */
            border: 12px solid #000;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .main1 {
            flex-basis: 70px; /* Set width of main1 to 70px */
            background-color: #f2f2f2;
        }

        .main2 {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .top {
            display: flex;
            /* Use flexbox */
            align-items: center;
            /* Vertically center align items */
            justify-content: center;
            /* Horizontally center align items */
            padding: 10px 10px;
            background-color: #007bff;
            color: #fff;
            text-align: center;
            font-weight: bold;
            position: relative;
        }

        .profile-image {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 10px;
            /* Add margin to separate image and title */
            display: block;
        }

        .title {
            margin: 0;
            /* Reset margin */
        }

        .chat {
            flex-grow: 1;
            overflow-y: scroll;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }

        .message {
            background-color: #007bff;
            color: #fff;
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 8px;
            max-width: 70%;
        }

        .suggestions {
            padding: 10px;
            background-color: #f2f2f2;
            border-bottom: 1px solid #ccc;
        }

        .suggestion-button {
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            margin-right: 10px;
            padding: 5px 10px;
            cursor: pointer;
        }

        .input-container {
            display: flex;
            align-items: center;
            padding: 10px;
        }

        .input-container input[type="text"] {
            flex-grow: 1;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .inactive {
            opacity: 0.5;
        }
        .placeholderDiv {
    position: relative;
    left: 10px;
    top: 70px;
    margin-bottom: 10px;
    background-color: blue;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer; /* Makes the cursor look like a pointer when hovering */
    transition: transform 0.3s; /* Smooth transition for the transform */
}

.placeholderDiv:hover {
    transform: scale(1.1); /* Scales up the element slightly on hover */
}
.placeholderDiv {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-right: 10px; /* Align with profile image margin */
    background-color: blue;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.3s;
}

.top .placeholderDiv, .top .profile-image {
    position: static; /* Override any other positioning */
    margin: auto 10px auto 0; /* Adjust for alignment */
}

.main1 .placeholderDiv, .main1 .profile-image {
    position: relative;
    left: 10px;
    top: 70px;
    margin-bottom: 10px;
}

.main1 .placeholderDiv:hover, .main1 .profile-image:hover {
    transform: scale(1.1);
}

        .active {opacity: 1;}
        .main1 img {position: relative;left: 10px; top: 70px;margin-bottom: 10px;}
        .main1 img {
    cursor: pointer; /* Makes the cursor look like a pointer when hovering over the image */
    transition: transform 0.3s; /* Smooth transition for the transform */
}
.profile-element {
    cursor: pointer; /* Makes the cursor look like a pointer when hovering */
    transition: transform 0.3s; /* Smooth transition for the transform */
}

.profile-element:hover {
    transform: scale(1.1); /* Scales up the element slightly on hover */
    user-select: none; /* Prevents text selection on hover */
}

.main1 img:hover {
    transform: scale(1.1); /* Scales up the image slightly on hover */
}
    </style>
</head>
<body>
    <div class="container">
        <div class="main1">
            <!-- Profile images or placeholders will be dynamically inserted here -->
        </div>
                <div class="main2"> <!-- Modified div main2 -->
                    <div class="top">
                        <img src="heather.png" alt="Heather" class="profile-image">
                        <div class="placeholderDiv" style="display: none;"></div>
                        <strong class="title">Heather</strong>
                    </div>
                    
            <div class="chat"></div>
            <div class="suggestions"></div>
            <div class="input-container">
                <input type="text" id="messageInput" placeholder="Type to find an Audio Log">
            </div>
        </div>
    </div>
    <a href="index.html" style="text-decoration: none;">
        <button style="margin: 10px auto; padding: 10px 20px; background-color: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; display: block;">Return</button>
    </a>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="module">
        import { profiles } from './profiles.js';
        $(document).ready(function() {
            let profile = 1;
            let events;
            $('.main1 img').each(function(index) {
                if ($(this).attr('src') === '') {
                    const altText = $(this).attr('alt');
                    const initials = altText.match(/\b(\w)/g).join('');
        
                    const placeholderDiv = $('<div></div>')
                        .addClass('placeholderDiv')
                        .text(initials)
                        .attr('data-profileid', index + 1);
        
                    $(this).replaceWith(placeholderDiv);
                }
            });
    // Function to generate profile elements in .main1
    function generateProfileElements() {
        const main1 = $('.main1');
        main1.empty(); // Clear existing content

        $.each(profiles, function(id, profile) {
            if (profile.image) {
                main1.append(`<img src="${profile.image}" alt="${profile.name}" class="profile-image" data-profileid="${id}">`);
            } else {
                const initials = profile.name.match(/\b(\w)/g).join('');
                main1.append(`<div class="placeholderDiv" data-profileid="${id}">${initials}</div>`);
            }
        });
    }
            generateProfileElements(); // Call the function
            async function updateProfile(newProfile) {
    profile = newProfile;
    clearSuggestions();
    await fetchSuggestions(profile);

    const profileData = profiles[profile];
    const topProfileImage = $('.top .profile-image');
    const topPlaceholderDiv = $('.top .placeholderDiv');
    const topTitle = $('.top .title');

    // Check if profile has an image or needs a placeholder
    if (profileData.image) {
        topProfileImage.attr('src', profileData.image).show();
        topPlaceholderDiv.hide();
    } else {
        const initials = profileData.name.match(/\b(\w)/g).join('');
        topPlaceholderDiv.text(initials).show();
        topProfileImage.hide();
    }
    topTitle.text(profileData.name);
}

            $('.main1 [data-profileid]').on("click", function() {
                const newProfile = parseInt($(this).attr('data-profileid'));
                if (!isNaN(newProfile)) {
                    updateProfile(newProfile);
                }
            });
            const chat = $(".chat");
            const messageInput = $("#messageInput");
        
            // Function to fetch suggestions from JSON
            async function fetchSuggestions(profile) {
                try {
                    const response = await fetch('newevents.json');
                    const data = await response.json();
                    events = data[profile];
                } catch (error) {
                    console.error('Error fetching events:', error);
                }
            }
        
            // Function to add message with dynamic delay
            async function addMessageWithDynamicDelay(title, message) {
                const messageDiv = $("<div></div>");
                messageDiv.addClass("message");
                messageDiv.html(`<strong>${title}:</strong> ${message}`);
                chat.append(messageDiv);
                const delay = 1000 + (message.length * 100);
                return new Promise((resolve) => setTimeout(resolve, delay));
            }
        
            // Function to handle suggestion
            async function handleSuggestion(suggestion) {
                if (events[suggestion]) {
                    for (const eventMessage of events[suggestion]) {
                        await addMessageWithDynamicDelay(eventMessage[0], eventMessage[1]);
                    }
                }
            }
        
            // Function to display suggestions
            function displaySuggestions(suggestions) {
                $(".suggestions").empty();
                for (const suggestion of suggestions) {
                    const suggestionButton = $("<button></button>");
                    suggestionButton.addClass("suggestion-button");
                    suggestionButton.text(suggestion);
                    suggestionButton.click(function() {
                        handleSuggestion(suggestion);
                    });
                    $(".suggestions").append(suggestionButton);
                }
            }
        
            // Function to clear suggestions
            function clearSuggestions() {
                $(".suggestions").empty();
            }
        
            // Call fetchSuggestions function with profile argument
            fetchSuggestions(profile);
        
            // Event handler for input changes
            messageInput.on("input", function() {
        const inputText = messageInput.val().trim().toLowerCase();
        if (inputText === "") {
            clearSuggestions(); // Clear suggestions when input is empty
        } else {
            const filteredSuggestions = Object.keys(events).filter(eventName =>
                eventName.toLowerCase().includes(inputText)
            );
            displaySuggestions(filteredSuggestions);
        }
    });
        });
        </script>
        
        
</body>
</html>