<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio</title>
    <style>
        body{margin:0;padding:0;font-family:Arial,sans-serif}
        .container{max-width:480px;width:100%;height:90vh;margin:5vh auto;display:flex;flex-direction:column;border: 12px solid #000;border-radius: 10px;box-shadow: 0 0 10px rgba(0,0,0,0.2)}
        .top{padding:10px;background-color:#007bff;color:#fff;text-align:center;font-weight:bold}
        .chat{flex-grow:1;overflow-y:scroll;padding:10px;border-bottom:1px solid #ccc}
        .message{background-color:#007bff;color:#fff;padding:8px;border-radius:8px;margin-bottom:8px;max-width:70%}
        .suggestions{padding:10px;background-color:#f2f2f2;border-bottom:1px solid #ccc}
        .suggestion-button{background-color:#007bff;color:#fff;border:none;border-radius:4px;margin-right:10px;padding:5px 10px;cursor:pointer}
        .input-container{display:flex;align-items:center;padding:10px}
        .input-container input[type="text"]{flex-grow:1;padding:5px;border:1px solid #ccc;border-radius:4px}
    </style>
</head>
<body>
    <div class="container">
        <div class="top">Modified Radio ||| Battery 88% ||| Range: Mid-Band</div>
        <div class="chat">
            <!-- Chat messages go here -->
        </div>
        <div class="suggestions">
            <!-- Suggestions go here -->
        </div>
        <div class="input-container">
            <input type="text" id="messageInput" placeholder="Type to find an Audio Log">
        </div>
    </div>
<!-- Add a button to return to index.html without underline -->
<a href="index.html" style="text-decoration: none;">
    <button style="margin: 10px auto; padding: 10px 20px; background-color: #333; color: #fff; border: none; border-radius: 4px; cursor: pointer; display: block;">Return</button>
</a>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
// ...

$(document).ready(function() {
    const chat = $(".chat");
    const messageInput = $("#messageInput");
    const onLoadSuggestions = ["Log #1"];
    let events;

    // Fetch the events from events.json
    fetch('events.json')
        .then(response => response.json())
        .then(data => {
            events = data;

            // Function to add a message with dynamic delay
            async function addMessageWithDynamicDelay(title, message) {
                const messageDiv = $("<div></div>");
                messageDiv.addClass("message");
                messageDiv.html(`<strong>${title}:</strong> ${message}`);
                chat.append(messageDiv);

                // Calculate the delay based on message length
                const delay = 1000 + (message.length * 100); // Minimum delay + 100ms per character
                return new Promise((resolve) => setTimeout(resolve, delay));
            }

            // Function to handle suggestions
            async function handleSuggestion(suggestion) {
                if (events[suggestion]) {
                    for (const eventMessage of events[suggestion]) {
                        await addMessageWithDynamicDelay(eventMessage[0], eventMessage[1]);
                    }
                }
            }

            // Function to display suggestions
            function displaySuggestions(suggestions) {
                $(".suggestions").empty();
                for (const suggestion of suggestions) {
                    const suggestionButton = $("<button></button>");
                    suggestionButton.addClass("suggestion-button");
                    suggestionButton.text(suggestion);
                    suggestionButton.click(function() {
                        handleSuggestion(suggestion);
                    });
                    $(".suggestions").append(suggestionButton);
                }
            }

            // Display onLoad suggestions initially
            displaySuggestions(onLoadSuggestions);

            // Handle input text change
            messageInput.on("input", function() {
                const inputText = messageInput.val().trim().toLowerCase();
                if (inputText === "") {
                    // Display onLoad suggestions when input is empty
                    displaySuggestions(onLoadSuggestions);
                } else {
                    // Display suggestions that contain the input text
                    const filteredSuggestions = Object.keys(events).filter(eventName =>
                        eventName.toLowerCase().includes(inputText)
                    );
                    displaySuggestions(filteredSuggestions);
                }
            });

        })
        .catch(error => console.error('Error fetching events:', error));
});

    </script>
    
</body>
</html>
